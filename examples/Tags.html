<script src="http://cdnjs.cloudflare.com/ajax/libs/coffee-script/1.6.3/coffee-script.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.4/underscore-min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.0.0/backbone-min.js"></script>

<link rel="stylesheet" href="../lib/doodad.css">
<script src="../lib/doodad.js"></script>

<style>
    .example_code {
        white-space: pre;
        font-family: Menlo, monospace;
        font-size: 14px;
        display: block;
    }
    .example_app {
        border: 1px solid #ccc;
    }
</style>

<h1>Doodad.Tags</h1>

<div class="example">
    <h2>Simple Tags</h2>
    <script type="text/coffeescript" class="example_code">
        tags = []
        tags.push new Doodad.Tags.H1
            content: 'Some heading 1 content'

        tags.push new Doodad.Tags.H2
            content: 'Some heading 2 content'

        tags.push new Doodad.Tags.H3
            content: 'Some heading 3 content'

        tags.push new Doodad.Tags.H4
            content: 'Some heading 4 content'

        tags.push new Doodad.Tags.H5
            content: 'Some heading 5 content'

        tags.push new Doodad.Tags.H6
            content: 'Some heading 6 content'

        tags.push new Doodad.Tags.P
            content: 'Some paragraph content'

        tags.push new Doodad.Tags.DIV
            content: 'Some div content'

        tags.push new Doodad.Tags.SPAN
            content: 'Some span content'

        tags.push new Doodad.Tags.EM
            content: 'Some em content'

        tags.push new Doodad.Tags.STRONG
            content: 'Some strong content'
        doodads.push(tags)

    </script>
</div>


<div class="example">
    <h2>Tags-On-Tags</h2>
    <script type="text/coffeescript" class="example_code">
        tags = []
        tags.push new Doodad.Tags.DIV
            content: [
                'Some text content '
                new Doodad.Tags.EM
                    content: 'some em content'
                ' more text content '
                new Doodad.Tags.STRONG
                    content: 'some strong content'
                new Doodad.Tags.SPAN
                    content: ' some span content.'
            ]
        doodads.push(tags)

    </script>
</div>


<div class="example">
    <h2>Tags know their appropriate children</h2>
    <script type="text/coffeescript" class="example_code">
        doodads.push new Doodad.Tags.UL
            content: [
                'A list item'
                new Doodad.Tags.LI
                    content: new Doodad.Tags.EM
                        content: 'An em inside a list item'
                'Another list item'
            ]

    </script>
</div>



<div class="example">
    <h2>Attributes get passed through</h2>
    <script type="text/coffeescript" class="example_code">
        tags = []
        tags.push new Doodad.Tags.A
            content: 'A link'
            href: 'http://example.com'
        tags.push new Doodad.Tags.IMG
            title: 'Some kittens'
            src: 'http://placekitten.com/300/200/'
            'data-2x': 'http://placekitten.com/600/400/'
        doodads.push(tags)

    </script>
</div>



<div class="example">
    <h2>Doodads-On-Tags</h2>
    <script type="text/coffeescript" class="example_code">
        tags = []
        tags.push new Doodad.Tags.P
            content: [
                'Some text content '
                new Doodad.Button
                    label: 'Button!'
                    action: ->
                ' more text content '
                new Doodad.Tags.STRONG
                    content: 'some strong content'
            ]
        doodads.push(tags)

    </script>
</div>




<div class="example">
    <h2>Tags and models</h2>
    <script type="text/coffeescript" class="example_code">
        model_1 = new Backbone.Model
            text_content: 'Some dynamic content'
        p_node = new Doodad.Tags.P
            content: model_1.get('text_content')
        model_1.on 'change:text_content', ->
            p_node.setContent(model_1.get('text_content'))

        model_2 = new Backbone.Model
            text_content: 'Other dynamic content'
        text_node = new Doodad.Tags.TextNode
            content: model_2.get('text_content')
        model_2.on 'change:text_content', ->
            text_node.setContent(model_2.get('text_content'))

        button = new Doodad.Button
            label: 'Change Model'
            action: ->
                x = new Date()
                model_1.set('text_content', "Changed: #{ x.getTime() }")
                model_2.set('text_content', "Even text nodes: #{ x.getTime() }")
        doodads.push([p_node, text_node, new Doodad.Tags.BR(), button])

    </script>
</div>





<script>
    window.doodads = [];
</script>

<script type="text/coffeescript">
    examples = $('.example')
    examples.find('h2').after """
        <div class="example_app">
            <div class="output"></div>
        </div>
    """
    _.each doodads, (doodad_set, i) ->
        console.log doodad_set, i
        $example_el = $(examples[i])
        unless _.isArray(doodad_set)
            doodad_set = [doodad_set]
        doodad_set.reverse()
        _.each doodad_set, (doodad_instance) ->
            # Add the doodad_instance to the DOM
            $example_el.find('.example_app').prepend(doodad_instance.render())



</script>