<script src="http://cdnjs.cloudflare.com/ajax/libs/coffee-script/1.6.3/coffee-script.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.4/underscore-min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.0.0/backbone-min.js"></script>

<link rel="stylesheet" href="../lib/doodad.css">
<script src="../lib/doodad.js"></script>

<style>
    .example_code {
        white-space: pre;
        font-family: Menlo, monospace;
        font-size: 14px;
        display: block;
    }
</style>

<h1>Doodad.Select</h1>

<div class="example">
    <h2>Basic select</h2>
    <script type="text/coffeescript" class="example_code">
        doodads.push new Doodad.Select
            type: 'grid'
            width: 4 # autofills height
            required: true
            action: (this_select) =>
                @text("layout.align: #{ this_select.value }")
            default: 'align-left'
            choices: [
                {
                    label: 'Left'
                    value: 'left'
                    class: 'align-left'
                }
                {
                    label: 'Center'
                    value: 'center'
                    class: 'align-center'
                }
                {
                    label: 'Right'
                    value: 'right'
                    class: 'align-right'
                }
                {
                    label: 'Justify'
                    value: 'justify'
                    class: 'align-right'
                }
            ]
        </script>
</div>


<div class="example">
    <h2>Basic select, redux</h2>
    <script type="text/coffeescript" class="example_code">
        doodads.push new Doodad.Select
            type: 'grid'
            height: 2 # autofills width
            required: true
            action: (this_select) =>
                @text("Layout set to #{ this_select.value }")
            choices: [
                {
                    label: 'Left'
                    value: 'left'
                    class: 'align-left'
                    default: true
                }
                {
                    label: 'Center'
                    value: 'center'
                    class: 'align-center'
                }
                {
                    label: 'Right'
                    value: 'right'
                    class: 'align-right'
                }
                {
                    label: 'Justify'
                    value: 'justify'
                    class: 'align-right'
                }
            ]
        </script>
</div>

<div class="example">
    <h2>Drop select</h2>
    <script type="text/coffeescript" class="example_code">
        doodads.push new Doodad.Select
            type: 'drop'
            required: false
            placeholder: 'Uncategorized'
            label: 'Category:'
            action: (this_select) ->
                @text("Picked #{ this_select.value }")
            choices: [
                {
                    label: 'Category 1'
                    value: 'category-1'
                }
                {
                    label: 'Category 2'
                    value: 'category-2'
                    default: true
                }
                {
                    label: 'Category 3'
                    value: 'category-3'
                }
                {
                    label: 'Category 4'
                    value: 'category-4'
                }
                {
                    label: 'Category 5'
                    value: 'category-5'
                }
                {
                    label: 'New Category'
                    value: (self) ->
                        console.log 'generate custom form'
                        # on button click, self.setValue()
                }
            ]
    </script>
</div>























<script>
    window.doodads = [];
</script>

<script type="text/coffeescript">
    examples = $('.example')
    examples.find('h2').after """
        <div class="example_app">
            <div class="output"></div>
        </div>
    """
    _.each doodads, (doodad_set, i) ->
        console.log doodad_set, i
        $example_el = $(examples[i])
        unless _.isArray(doodad_set)
            doodad_set = [doodad_set]
        _.each doodad_set, (doodad_instance) ->
            # Add the doodad_instance to the DOM
            $example_el.find('.example_app').prepend(doodad_instance.render())

            # Patch the action to use the output element as `this`, and have
            # it reset after two seconds.
            old_action = doodad_instance._options.action
            doodad_instance._options.action = (inst) ->
                old_action.call($example_el.find('.output'), inst)



</script>